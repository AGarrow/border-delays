function requestData(t,e,n,i){inactivateButton(t,n),changeLegendText(t,n),$.ajax({url:"/chart_data",type:"Get",dataType:"json",data:{bound:t,id:document.getElementById("title").getAttribute("data-id"),commercial:e,wday:n},success:function(t){drawChart(t,i)}})}function inactivateButton(t,e){var n;n="usa"==t?document.querySelectorAll(".day_select_usa"):document.querySelectorAll(".day_select_canada");for(var i=0;i<n.length;i++)n[i].value==e?n[i].className+="active":n[i].className=n[i].className.replace("active","")}function changeLegendText(t,e){var n=getLegendText(e);"usa"==t?document.getElementById("usa-legend-recent").innerHTML=n:document.getElementById("canada-legend-recent").innerHTML=n}function getLegendText(t){var e;return weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=1==t?"= Today":"= Last "+weekdays[t]}function drawChart(t,e){data={labels:t.labels,datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:t.average},{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:t.recent}]},options={scaleOverride:!0,scaleSteps:6,scaleStepWidth:10,scaleStartValue:0,scaleFontSize:8,pointDot:!1};var n=document.getElementById(e),i=n.getContext("2d");if(charts[String(e)]){var o=charts[String(e)];o.Line(data,options)}else{var o=new Chart(i);charts[String(e)]=o,o.Line(data,options)}}$(document).ready(function(){var t=1;requestData("canada",!1,t,"canada_bound_private"),requestData("canada",!0,t,"canada_bound_commercial"),requestData("usa",!1,t,"usa_bound_private"),requestData("usa",!0,t,"usa_bound_commercial"),$(".day_select_usa").click(function(){requestData("usa",!1,this.value,"usa_bound_private"),requestData("usa",!0,this.value,"usa_bound_commercial")}),$(".day_select_canada").click(function(){requestData("canada",!1,this.value,"canada_bound_private"),requestData("canada",!0,this.value,"canada_bound_commercial")})});var charts={};